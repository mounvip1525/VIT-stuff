import React, { useState } from 'react';

function FileViewer(props) {
  const [fileContent, setFileContent] = useState([]);

  const handleClick = async () => {
    const response = await fetch(props.filePath);
    const text = await response.text();
    const lines = text.split('\n');
    const formattedLines = lines.map((line, index) => {
      if (line.includes(props.highlightWord)) {
        return { line: line, status: 'highlighted' };
      } else {
        return { line: line, status: '' };
      }
    });
    setFileContent(formattedLines);

    let i = 0;
    const interval = setInterval(() => {
      if (i < formattedLines.length) {
        setFileContent(prevContent => {
          const newContent = [...prevContent];
          newContent[i].status = formattedLines[i].status;
          i++;
          return newContent;
        });
      } else {
        clearInterval(interval);
      }
    }, 50);
  }

  return (
    <div>
      <button onClick={handleClick}>Show File</button>
      <div className="file-content">
        {fileContent.map((line, index) => (
          <div key={index} className={line.status}>{line.line}</div>
        ))}
      </div>
      <style>
        {`
        .highlighted {
          color: red;
        }
        `}
      </style>
    </div>
  );
}

export default FileViewer;
